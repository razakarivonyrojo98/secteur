-- Création de la séquence pour l'ID auto-incrémenté
CREATE SEQUENCE seq_user_autorized_id
    START WITH 1
    INCREMENT BY 1
    NOCACHE
    NOCYCLE;

-- Création de la table
CREATE TABLE user_autorized (
    id           NUMBER(10)       NOT NULL,
    matricule    VARCHAR2(10 CHAR),
    nom          VARCHAR2(255 CHAR),
    is_autorized NUMBER(1),
    CONSTRAINT pk_user_autorized PRIMARY KEY (id)
);

-- Déclencheur pour auto-incrémenter l'ID via la séquence
CREATE OR REPLACE TRIGGER trg_user_autorized_id
BEFORE INSERT ON user_autorized
FOR EACH ROW
WHEN (NEW.id IS NULL)
BEGIN
    SELECT seq_user_autorized_id.NEXTVAL
    INTO   :NEW.id
    FROM   dual;
END;
/
