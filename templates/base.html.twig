<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" type="image/png" href="{{asset('image/bfm_logo.png') }}">
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

        <!-- Bootstrap Icons -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

        <!-- CDN SweetAlert2 -->
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        
        <!-- Fontawesone -->
        <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>

        {% block stylesheets %}
            
        {% endblock %}
        
        
        {% block javascripts %}
            {% block importmap %}{{ importmap('app') }}{% endblock %}
        {% endblock %}
    </head>
    <body>
    <div >
        {% if app.request.attributes.get('_route') != 'app_login' %}
            <div class="wrapper">
    <div class="top_navbar">
        <div class="hamburger">
        </div>
        <div class="top_menu">
            <div class="logo">Evolution des indices des prix a la consommation</div>
            <ul>
                {{app.user.nom }}
                <li><a href="#">
                <i class="fas fa-user"></i>
                </a></li>
            </ul>
        </div>
    </div> 
  
<style>
*{
  margin: 0;
  padding: 0;
  list-style: none;
  text-decoration: none;
  box-sizing: border-box;
}

.wrapper .top_navbar{
  width: 100%;
  height: 40px;
  display: flex;
  position: fixed;
 
}
.wrapper .top_navbar .hamburger{
  width: 40px;
  height: 100%;
  background: #2e4ead;
  padding: 10px 10px;
  border-top-left-radius: 02px;
  cursor: pointer;
 
}
.wrapper .top_navbar .hamburger div{
  width: 20px;
  height: 5px;
  background: #92a6e2;
  
  margin: 3px 0;
  border-radius: 5px;
}
.wrapper .top_navbar .top_menu{
  width: calc(100% - 0px);
  height: 100%;
  background: #fff;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 20px;
  box-shadow: 0 1px 1px #0000001a;
}
.wrapper .top_navbar .top_menu .logo{
  color: #2e4ead;
  font-size: 15px;
  font-weight: 700;
  letter-spacing: 3px;
  margin-left: 170px;
}
.wrapper .top_navbar .top_menu ul{
  display: flex;
  padding-top: 15px;
}
.wrapper .top_navbar .top_menu ul li a {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 10px;
  width: 25px;
  height: 25px;
  text-align: center;
  border: 2px solid #2e4ead;
  border-radius: 50%;
  color: #2e4ead;
  padding: 0; /* Important pour éviter le décalage */
}
.wrapper .top_navbar .top_menu ul li a:hover{
  background: #4360b5;
  color: #fff;
}
.wrapper .top_navbar .top_menu ul li a:hover i{
  color: #fff;
}
.wrapper .sidebar {
  position: fixed; 
  background: #2e4ead;
  width: 200px;
  height: 100%; /* Plus propre */
  border-bottom-left-radius: 20px;
  transition: all 0.3s ease;
  padding-top: 20px;
  z-index: 1000;
  left: 0;

  /* Ajout flex pour positionner le logout en bas */
  display: flex;
  flex-direction: column;
}

.wrapper .sidebar ul {
  padding: 0;
  margin: 0;
  list-style: none;
  flex-grow: 1; /* Remplit l'espace vertical */
  display: flex;
  flex-direction: column;
}

.wrapper .sidebar ul li {
  margin-bottom: 1px;
}

.wrapper .sidebar ul li a {
  display: block;
  padding: 15px;
  color: #92a6e2; /* Couleur unique */
  white-space: nowrap;
  text-decoration: none;
  position: relative;
}

.wrapper .sidebar ul li.logout {
  position: absolute;
  bottom: 20px;
  width: 100%;
}

.wrapper .sidebar ul li a:before{
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 3px;
  height: 100%;
  background: #a0a2a7ff;
  display: none;
}
.wrapper .sidebar ul li a span.icon{
  margin-right: 10px;
  display: inline-block;
}
.wrapper .sidebar ul li a span.title{
  display: inline-block;
}

.wrapper .sidebar ul li a:hover,
.wrapper .sidebar ul li a.active{
  background: #4360b5;
  color: #fff;
}
.wrapper .sidebar ul li a:hover:before,
.wrapper .sidebar ul li a.active:before{
  display: block;
  
}

.wrapper .main_container{
  margin-top: 50px;
  margin-left: 190px;
  width: calc(100% - 200px);
  padding: 15px;
  transition: all 0.3s ease;
}

.wrapper .main_container .item{
  background: #fff;
  margin-bottom: 10px;
  padding: 15px;
  font-size: 14px;
  line-height: 22px;
}

.wrapper.collapse .sidebar{
  width: 70px;
}
.wrapper.collapse .sidebar ul li a{
  text-align: center; 
}
.wrapper.collapse .sidebar ul li a span.icon{
  margin: 0;
}
.wrapper.collapse .sidebar ul li a span.title{
  display: none;
}
.wrapper.collapse .main_container{
  width: calc(100% - 70px);
  margin-left: 70px;
}

/* Réduction automatique en dessous de 1100px */
/* Sidebar responsive : icônes seulement en petit écran */
@media (max-width: 1100px) {
  .wrapper .sidebar {
    width: 70px; /* Réduit la largeur */
  }

  .wrapper .sidebar ul li a {
    text-align: center; /* Centre les icônes */
  }

  /* Cache le texte */
  .wrapper .sidebar ul li a span {
    display: none;
  }

  /* Ajuste le contenu principal */
  .wrapper .main_container {
    margin-left: 50px;
    width: calc(100% - 50px);
  }
  @media screen and (max-width: 850px) {
    .entete {
        margin-left: 0;
        margin-top: 20px;
    }
    .modal-content {
    left: 15% !important;

}

}
}

}
</style>
    <div class="sidebar">
      <nav> 
          <ul class="menu">
              <li>
                  <a href="{{ path('app_secteur_valide_index') }}"
                  class="{{ app.request.attributes.get('_route') starts with 'app_secteur_valide' ? 'active' : '' }}">
                      <i class="bi bi-diagram-3"></i><span> Secteurs</span>
                  </a>
              </li>

              <li>
                  <a href="{{ path('app_fonction_valide_index') }}"
                  class="{{ app.request.attributes.get('_route') starts with 'app_fonction_valide' ? 'active' : '' }}">
                      <i class="bi bi-person-gear"></i><span> Fonctions</span>
                  </a>
              </li>

              <li>
                  <a href="{{ path('app_origine_valide_index') }}"
                  class="{{ app.request.attributes.get('_route') starts with 'app_origine_valide' ? 'active' : '' }}">
                      <i class="bi bi-globe"></i><span> Origines</span>
                  </a>
              </li>
          </ul>

          <!-- Bouton déconnexion séparé -->
          <ul class="menu logout-menu">
              <li class="logout">
                  <a href="{{ path('app_logout') }}" id="logoutBtn">
                      <i class="bi bi-box-arrow-right"></i><span> Déconnexion</span>
                  </a>
              </li>
          </ul>
      </nav>
  </div>
    
</div>
        {% endif %}
        <div class="main_container">
            {% block body %}{% endblock %}
        </div>
    </div>
  <script>
document.addEventListener("DOMContentLoaded", function () {
    const menuLinks = document.querySelectorAll(".menu li a");

    menuLinks.forEach(function (link) {
        link.addEventListener("click", function (e) {
            e.preventDefault(); // On empêche la navigation immédiate
            menuLinks.forEach(l => l.classList.remove("active")); // Retire l'actif
            this.classList.add("active"); // Met actif sur le lien cliqué
            
            // Redirige vers la route définie dans le href
            window.location.href = this.getAttribute("href");
        });
    });
});

</script>

    </body>
</html>


